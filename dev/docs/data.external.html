---

title: External data
keywords: fastai
sidebar: home_sidebar

summary: "Helper functions to download the fastai datasets"
---
<!--


#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: dev/03_data_external.ipynb
# instructions: https://docs.fast.ai/gen_doc_main.html

-->

<div class="container" id="notebook-container">
    
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Download-things">Download things<a class="anchor-link" href="#Download-things">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="download_url" class="doc_header"><code>download_url</code><a class="source_link" data-toggle="collapse" data-target="#download_url-pytest" style="float:right; padding-right:10px">[test]</a></h4><blockquote><p><code>download_url</code>(<strong><code>url</code></strong>, <strong><code>dest</code></strong>, <strong><code>overwrite</code></strong>=<strong><em><code>False</code></em></strong>, <strong><code>pbar</code></strong>=<strong><em><code>None</code></em></strong>, <strong><code>show_progress</code></strong>=<strong><em><code>True</code></em></strong>, <strong><code>chunk_size</code></strong>=<strong><em><code>1048576</code></em></strong>, <strong><code>timeout</code></strong>=<strong><em><code>4</code></em></strong>, <strong><code>retries</code></strong>=<strong><em><code>5</code></em></strong>)</p>
</blockquote>
<div class="collapse" id="download_url-pytest"><div class="card card-body pytest_card"><a type="button" data-toggle="collapse" data-target="#download_url-pytest" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></a><p>No tests found for <code>download_url</code>. To contribute a test please refer to <a href="/dev/test.html">this guide</a> and <a href="https://forums.fast.ai/t/improving-expanding-functional-tests/32929">this discussion</a>.</p></div></div><p>Download <code>url</code> to <code>dest</code> unless it exists and not <code>overwrite</code></p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">url</span><span class="p">,</span> <span class="n">fname</span> <span class="o">=</span> <span class="s1">&#39;http://files.fast.ai/data/examples/mnist_tiny.tgz&#39;</span><span class="p">,</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;mnist_tiny.tgz&#39;</span><span class="p">)</span>
<span class="n">download_url</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">fname</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">fname</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getmtime</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
<span class="c1">#Launching the function again doesn&#39;t trigger a download since the file is already there.</span>
<span class="n">download_url</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">fname</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getmtime</span><span class="p">(</span><span class="n">fname</span><span class="p">))</span>
<span class="c1">#But with the overwrite option, we download it again.</span>
<span class="n">download_url</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">test_ne</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getmtime</span><span class="p">(</span><span class="n">fname</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Base urls</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="URLs" class="doc_header"><code>class</code> <code>URLs</code><a class="source_link" data-toggle="collapse" data-target="#URLs-pytest" style="float:right; padding-right:10px">[test]</a></h2><blockquote><p><code>URLs</code>()</p>
</blockquote>
<div class="collapse" id="URLs-pytest"><div class="card card-body pytest_card"><a type="button" data-toggle="collapse" data-target="#URLs-pytest" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></a><p>No tests found for <code>URLs</code>. To contribute a test please refer to <a href="/dev/test.html">this guide</a> and <a href="https://forums.fast.ai/t/improving-expanding-functional-tests/32929">this discussion</a>.</p></div></div><p>Global constants for dataset and model URLs.</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Config-file">Config file<a class="anchor-link" href="#Config-file">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#This cell is just to make the config file compatible with current fastai</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">_get_config</span><span class="p">()</span>
<span class="k">if</span> <span class="s1">&#39;data_archive_path&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">config</span><span class="p">:</span> <span class="n">config</span><span class="p">[</span><span class="s1">&#39;data_archive_path&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s1">&#39;data_path&#39;</span><span class="p">]</span>
<span class="n">config_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;FASTAI_HOME&#39;</span><span class="p">,</span> <span class="s1">&#39;~/.fastai&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">expanduser</span><span class="p">()</span>
<span class="n">config_file</span><span class="p">,</span><span class="n">config_bak</span> <span class="o">=</span> <span class="n">config_path</span><span class="o">/</span><span class="s1">&#39;config.yml&#39;</span><span class="p">,</span><span class="n">config_path</span><span class="o">/</span><span class="s1">&#39;config.yml.bak&#39;</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">config_file</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">yaml_file</span><span class="p">:</span> 
    <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">yaml_file</span><span class="p">,</span> <span class="n">default_flow_style</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">config_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;FASTAI_HOME&#39;</span><span class="p">,</span> <span class="s1">&#39;~/.fastai&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">expanduser</span><span class="p">()</span>
<span class="n">config_file</span><span class="p">,</span><span class="n">config_bak</span> <span class="o">=</span> <span class="n">config_path</span><span class="o">/</span><span class="s1">&#39;config.yml&#39;</span><span class="p">,</span><span class="n">config_path</span><span class="o">/</span><span class="s1">&#39;config.yml.bak&#39;</span>
<span class="k">if</span> <span class="n">config_file</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span> <span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">config_file</span><span class="p">,</span> <span class="n">config_bak</span><span class="p">)</span>
<span class="c1">#Test default config</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">_get_config</span><span class="p">()</span>
<span class="k">assert</span> <span class="p">(</span><span class="n">config_path</span><span class="o">/</span><span class="s1">&#39;config.yml&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="p">{</span>
        <span class="s1">&#39;data_path&#39;</span><span class="p">:</span>    <span class="nb">str</span><span class="p">(</span><span class="n">config_path</span><span class="o">/</span><span class="s1">&#39;data&#39;</span><span class="p">),</span>
        <span class="s1">&#39;archive_path&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">config_path</span><span class="o">/</span><span class="s1">&#39;archive&#39;</span><span class="p">),</span>
        <span class="s1">&#39;model_path&#39;</span><span class="p">:</span>   <span class="nb">str</span><span class="p">(</span><span class="n">config_path</span><span class="o">/</span><span class="s1">&#39;models&#39;</span><span class="p">),</span>
        <span class="s1">&#39;version&#39;</span><span class="p">:</span>      <span class="mi">1</span>
    <span class="p">})</span>

<span class="c1">#Test change in config</span>
<span class="n">config</span><span class="p">[</span><span class="s1">&#39;archive_path&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;.&#39;</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">config_path</span><span class="o">/</span><span class="s1">&#39;config.yml&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">yaml_file</span><span class="p">:</span> 
    <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">yaml_file</span><span class="p">,</span> <span class="n">default_flow_style</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">_get_config</span><span class="p">()</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="p">{</span>
        <span class="s1">&#39;data_path&#39;</span><span class="p">:</span>    <span class="nb">str</span><span class="p">(</span><span class="n">config_path</span><span class="o">/</span><span class="s1">&#39;data&#39;</span><span class="p">),</span>
        <span class="s1">&#39;archive_path&#39;</span><span class="p">:</span> <span class="s1">&#39;.&#39;</span><span class="p">,</span>
        <span class="s1">&#39;model_path&#39;</span><span class="p">:</span>   <span class="nb">str</span><span class="p">(</span><span class="n">config_path</span><span class="o">/</span><span class="s1">&#39;models&#39;</span><span class="p">),</span>
        <span class="s1">&#39;version&#39;</span><span class="p">:</span>      <span class="mi">1</span>
    <span class="p">})</span>

<span class="k">if</span> <span class="n">config_bak</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span> <span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">config_bak</span><span class="p">,</span> <span class="n">config_file</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_path" class="doc_header"><code>get_path</code><a class="source_link" data-toggle="collapse" data-target="#get_path-pytest" style="float:right; padding-right:10px">[test]</a></h4><blockquote><p><code>get_path</code>(<strong><code>c_key</code></strong>=<strong><em><code>&lt;ConfigKey.Data: 1&gt;</code></em></strong>)</p>
</blockquote>
<div class="collapse" id="get_path-pytest"><div class="card card-body pytest_card"><a type="button" data-toggle="collapse" data-target="#get_path-pytest" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></a><p>No tests found for <code>get_path</code>. To contribute a test please refer to <a href="/dev/test.html">this guide</a> and <a href="https://forums.fast.ai/t/improving-expanding-functional-tests/32929">this discussion</a>.</p></div></div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">config</span> <span class="o">=</span> <span class="n">_get_config</span><span class="p">()</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;data_path&#39;</span><span class="p">]),</span>    <span class="n">get_path</span><span class="p">(</span><span class="n">ConfigKey</span><span class="o">.</span><span class="n">Data</span><span class="p">))</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;archive_path&#39;</span><span class="p">]),</span> <span class="n">get_path</span><span class="p">(</span><span class="n">ConfigKey</span><span class="o">.</span><span class="n">Archive</span><span class="p">))</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;model_path&#39;</span><span class="p">]),</span>   <span class="n">get_path</span><span class="p">(</span><span class="n">ConfigKey</span><span class="o">.</span><span class="n">Model</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Download-in-the-right-place">Download in the right place<a class="anchor-link" href="#Download-in-the-right-place">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="download_data" class="doc_header"><code>download_data</code><a class="source_link" data-toggle="collapse" data-target="#download_data-pytest" style="float:right; padding-right:10px">[test]</a></h4><blockquote><p><code>download_data</code>(<strong><code>url</code></strong>, <strong><code>fname</code></strong>=<strong><em><code>None</code></em></strong>, <strong><code>c_key</code></strong>=<strong><em><code>&lt;ConfigKey.Archive: 2&gt;</code></em></strong>, <strong><code>force_download</code></strong>=<strong><em><code>False</code></em></strong>)</p>
</blockquote>
<div class="collapse" id="download_data-pytest"><div class="card card-body pytest_card"><a type="button" data-toggle="collapse" data-target="#download_data-pytest" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></a><p>No tests found for <code>download_data</code>. To contribute a test please refer to <a href="/dev/test.html">this guide</a> and <a href="https://forums.fast.ai/t/improving-expanding-functional-tests/32929">this discussion</a>.</p></div></div><p>Download <code>url</code> to <code>fname</code>.</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>If <code>fname</code> is None, it will default to the archive folder you have in your config file (or data, model if you specify a different <code>c_key</code>) followed by the last part of the url: for instance <code>URLs.MNIST_SAMPLE</code> is <code>http://files.fast.ai/data/examples/mnist_sample.tgz</code> and the default value for <code>fname</code> will be <code>~/.fastai/archive/mnist_sample.tgz</code>.</p>
<p>If <code>force_download=True</code>, the file is alwayd downloaded. Otherwise, it's only when the file doesn't exists that the download is triggered.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_eq</span><span class="p">(</span><span class="n">download_data</span><span class="p">(</span><span class="n">URLs</span><span class="o">.</span><span class="n">MNIST_SAMPLE</span><span class="p">),</span> <span class="n">get_path</span><span class="p">(</span><span class="n">ConfigKey</span><span class="o">.</span><span class="n">Archive</span><span class="p">)</span><span class="o">/</span><span class="s1">&#39;mnist_sample.tgz&#39;</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">download_data</span><span class="p">(</span><span class="n">URLs</span><span class="o">.</span><span class="n">MNIST_TINY</span><span class="p">,</span> <span class="n">fname</span><span class="o">=</span><span class="n">Path</span><span class="p">(</span><span class="s1">&#39;mnist.tgz&#39;</span><span class="p">)),</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;mnist.tgz&#39;</span><span class="p">))</span>
<span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="s1">&#39;mnist.tgz&#39;</span><span class="p">))</span>

<span class="n">tst_model</span> <span class="o">=</span> <span class="n">get_path</span><span class="p">(</span><span class="n">ConfigKey</span><span class="o">.</span><span class="n">Model</span><span class="p">)</span><span class="o">/</span><span class="s1">&#39;mnist_tiny.tgz&#39;</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">download_data</span><span class="p">(</span><span class="n">URLs</span><span class="o">.</span><span class="n">MNIST_TINY</span><span class="p">,</span> <span class="n">c_key</span><span class="o">=</span><span class="n">ConfigKey</span><span class="o">.</span><span class="n">Model</span><span class="p">),</span> <span class="n">tst_model</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">tst_model</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="untar_data" class="doc_header"><code>untar_data</code><a class="source_link" data-toggle="collapse" data-target="#untar_data-pytest" style="float:right; padding-right:10px">[test]</a></h4><blockquote><p><code>untar_data</code>(<strong><code>url</code></strong>, <strong><code>fname</code></strong>=<strong><em><code>None</code></em></strong>, <strong><code>dest</code></strong>=<strong><em><code>None</code></em></strong>, <strong><code>c_key</code></strong>=<strong><em><code>&lt;ConfigKey.Data: 1&gt;</code></em></strong>, <strong><code>force_download</code></strong>=<strong><em><code>False</code></em></strong>)</p>
</blockquote>
<div class="collapse" id="untar_data-pytest"><div class="card card-body pytest_card"><a type="button" data-toggle="collapse" data-target="#untar_data-pytest" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></a><p>No tests found for <code>untar_data</code>. To contribute a test please refer to <a href="/dev/test.html">this guide</a> and <a href="https://forums.fast.ai/t/improving-expanding-functional-tests/32929">this discussion</a>.</p></div></div><p>Download <code>url</code> to <code>fname</code> if <code>dest</code> doesn't exist, and un-tgz to folder <code>dest</code>.</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><code>untar_data</code> is a convenience function for the fastai datasets, intended to work with the urls in <code>URLs</code>. You can use it with another url only if it ends with <code>.tgz</code> (otherwise the function can download it but not decompress it). For other extensions, you should use <code>download_data</code> then the necessary decompress function.</p>
<p>If <code>fname</code> is specified, the data will be downloaded to that destination, otherwise it will default to the archive path in your config file (default <code>~/.fastai/archive/</code>) followed by the last part of your url. For instance <code>URLs.MNIST_SAMPLE</code> is <code>http://files.fast.ai/data/examples/mnist_sample.tgz</code> and the default value for <code>fname</code> will be <code>~/.fastai/archive/mnist_sample.tgz</code>.</p>
<p>If <code>dest</code> is specified, the data will be decompressed to that folder. Otherwise, it will default to the data path (or model/archive if you specify a different <code>c_key</code>) in your config file (default <code>~/.fastai/data/</code>) followed by the last part of your url without extension. For instance <code>URLs.MNIST_SAMPLE</code> is <code>http://files.fast.ai/data/examples/mnist_sample.tgz</code> and the default value for <code>dest</code> will be <code>~/.fastai/data/mnist_sample</code>.</p>
<p><code>force_download=True</code> will retrigger a download, otherwise the behavior is to:</p>
<ul>
<li>not do anything when <code>dest</code> exists</li>
<li>otherwise decompress <code>fname</code> to <code>dest</code> if <code>fname</code> exists</li>
<li>otherwise download then decompress <code>fname</code> to <code>dest</code></li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_eq</span><span class="p">(</span><span class="n">untar_data</span><span class="p">(</span><span class="n">URLs</span><span class="o">.</span><span class="n">MNIST_SAMPLE</span><span class="p">),</span> <span class="n">get_path</span><span class="p">()</span><span class="o">/</span><span class="s1">&#39;mnist_sample&#39;</span><span class="p">)</span>

<span class="c1">#Test specific fname</span>
<span class="n">untar_data</span><span class="p">(</span><span class="n">URLs</span><span class="o">.</span><span class="n">MNIST_TINY</span><span class="p">,</span> <span class="n">fname</span><span class="o">=</span><span class="s1">&#39;mnist_tiny.tgz&#39;</span><span class="p">,</span> <span class="n">force_download</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;mnist_tiny.tgz&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>
<span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="s1">&#39;mnist_tiny.tgz&#39;</span><span class="p">))</span>

<span class="c1">#Test specific dest</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">untar_data</span><span class="p">(</span><span class="n">URLs</span><span class="o">.</span><span class="n">MNIST_TINY</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">),</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;mnist_tiny&#39;</span><span class="p">))</span>
<span class="k">assert</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;mnist_tiny&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>
<span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="s1">&#39;mnist_tiny&#39;</span><span class="p">))</span>

<span class="c1">#Test c_key</span>
<span class="n">tst_model</span> <span class="o">=</span> <span class="n">get_path</span><span class="p">(</span><span class="n">ConfigKey</span><span class="o">.</span><span class="n">Model</span><span class="p">)</span><span class="o">/</span><span class="s1">&#39;mnist_sample&#39;</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">untar_data</span><span class="p">(</span><span class="n">URLs</span><span class="o">.</span><span class="n">MNIST_SAMPLE</span><span class="p">,</span> <span class="n">c_key</span><span class="o">=</span><span class="n">ConfigKey</span><span class="o">.</span><span class="n">Model</span><span class="p">),</span> <span class="n">tst_model</span><span class="p">)</span>
<span class="k">assert</span> <span class="ow">not</span> <span class="n">tst_model</span><span class="o">.</span><span class="n">with_suffix</span><span class="p">(</span><span class="s1">&#39;.tgz&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span> <span class="c1">#Archive wasn&#39;t downloaded in the models path</span>
<span class="k">assert</span> <span class="p">(</span><span class="n">get_path</span><span class="p">(</span><span class="n">ConfigKey</span><span class="o">.</span><span class="n">Archive</span><span class="p">)</span><span class="o">/</span><span class="s1">&#39;mnist_sample.tgz&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span> <span class="c1">#Archive was downloaded there</span>
<span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">tst_model</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>
 

