---

title: Test
keywords: fastai
sidebar: home_sidebar

summary: "Helper functions to quickly write tests in notebooks"
---
<!--


#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: dev/00_test.ipynb
# instructions: https://docs.fast.ai/gen_doc_main.html

-->

<div class="container" id="notebook-container">
    
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Simple-test-functions">Simple test functions<a class="anchor-link" href="#Simple-test-functions">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can test for equality (<code>test_eq</code>) or inequality (<code>test_ne</code>) of arrays, tensors, and scalars, and lists of any of these. We can also check that code raises an exception when that's expected (<code>test_fail</code>).</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="test_fail" class="doc_header"><code>test_fail</code><a class="source_link" data-toggle="collapse" data-target="#test_fail-pytest" style="float:right; padding-right:10px">[test]</a></h4><blockquote><p><code>test_fail</code>(<strong><code>f</code></strong>, <strong><code>msg</code></strong>=<strong><em><code>''</code></em></strong>, <strong><code>contains</code></strong>=<strong><em><code>''</code></em></strong>)</p>
</blockquote>
<div class="collapse" id="test_fail-pytest"><div class="card card-body pytest_card"><a type="button" data-toggle="collapse" data-target="#test_fail-pytest" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></a><p>No tests found for <code>test_fail</code>. To contribute a test please refer to <a href="/dev/test.html">this guide</a> and <a href="https://forums.fast.ai/t/improving-expanding-functional-tests/32929">this discussion</a>.</p></div></div><p>Fails with <code>msg</code> unless <code>f()</code> raises an exception and (optionally) has <code>contains</code> in <code>e.args</code></p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">_fail</span><span class="p">():</span> <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;foobar&quot;</span><span class="p">)</span>
<span class="n">test_fail</span><span class="p">(</span><span class="n">_fail</span><span class="p">,</span> <span class="n">contains</span><span class="o">=</span><span class="s2">&quot;foo&quot;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_fail</span><span class="p">():</span> <span class="k">raise</span> <span class="ne">Exception</span><span class="p">()</span>
<span class="n">test_fail</span><span class="p">(</span><span class="n">_fail</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="test" class="doc_header"><code>test</code><a class="source_link" data-toggle="collapse" data-target="#test-pytest" style="float:right; padding-right:10px">[test]</a></h4><blockquote><p><code>test</code>(<strong><code>a</code></strong>, <strong><code>b</code></strong>, <strong><code>cmp</code></strong>, <strong><code>cname</code></strong>=<strong><em><code>None</code></em></strong>)</p>
</blockquote>
<div class="collapse" id="test-pytest"><div class="card card-body pytest_card"><a type="button" data-toggle="collapse" data-target="#test-pytest" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></a><p>No tests found for <code>test</code>. To contribute a test please refer to <a href="/dev/test.html">this guide</a> and <a href="https://forums.fast.ai/t/improving-expanding-functional-tests/32929">this discussion</a>.</p></div></div><p><code>assert</code> that <code>cmp(a,b)</code>; display inputs and <code>cname or cmp.__name__</code> if it fails</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">operator</span><span class="o">.</span><span class="n">eq</span><span class="p">)</span>
<span class="n">test_fail</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">test</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],[</span><span class="mi">1</span><span class="p">],</span> <span class="n">operator</span><span class="o">.</span><span class="n">eq</span><span class="p">))</span>
<span class="n">test</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],[</span><span class="mi">1</span><span class="p">],</span>   <span class="n">operator</span><span class="o">.</span><span class="n">ne</span><span class="p">)</span>
<span class="n">test_fail</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">test</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">operator</span><span class="o">.</span><span class="n">ne</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="equals" class="doc_header"><code>equals</code><a class="source_link" data-toggle="collapse" data-target="#equals-pytest" style="float:right; padding-right:10px">[test]</a></h4><blockquote><p><code>equals</code>(<strong><code>a</code></strong>, <strong><code>b</code></strong>)</p>
</blockquote>
<div class="collapse" id="equals-pytest"><div class="card card-body pytest_card"><a type="button" data-toggle="collapse" data-target="#equals-pytest" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></a><p>No tests found for <code>equals</code>. To contribute a test please refer to <a href="/dev/test.html">this guide</a> and <a href="https://forums.fast.ai/t/improving-expanding-functional-tests/32929">this discussion</a>.</p></div></div><p>Compares <code>a</code> and <code>b</code> for equality; supports sublists, tensors and arrays too</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test</span><span class="p">([</span><span class="s1">&#39;abc&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;abc&#39;</span><span class="p">],</span>  <span class="n">equals</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="nequals" class="doc_header"><code>nequals</code><a class="source_link" data-toggle="collapse" data-target="#nequals-pytest" style="float:right; padding-right:10px">[test]</a></h4><blockquote><p><code>nequals</code>(<strong><code>a</code></strong>, <strong><code>b</code></strong>)</p>
</blockquote>
<div class="collapse" id="nequals-pytest"><div class="card card-body pytest_card"><a type="button" data-toggle="collapse" data-target="#nequals-pytest" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></a><p>No tests found for <code>nequals</code>. To contribute a test please refer to <a href="/dev/test.html">this guide</a> and <a href="https://forums.fast.ai/t/improving-expanding-functional-tests/32929">this discussion</a>.</p></div></div><p>Compares <code>a</code> and <code>b</code> for <code>not equals</code></p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test</span><span class="p">([</span><span class="s1">&#39;abc&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;ab&#39;</span> <span class="p">],</span> <span class="n">nequals</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="test_eq-test_ne,-etc...">test_eq test_ne, etc...<a class="anchor-link" href="#test_eq-test_ne,-etc...">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Just use <code>test_eq</code>/<code>test_ne</code> to test for <code>==</code>/<code>!=</code>. We define them using <code>test</code>:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#exports</span>
<span class="k">def</span> <span class="nf">test_eq</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">):</span>
    <span class="s2">&quot;`test` that `a==b`&quot;</span>
    <span class="n">test</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">equals</span><span class="p">,</span> <span class="s1">&#39;==&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="test_eq" class="doc_header"><code>test_eq</code><a class="source_link" data-toggle="collapse" data-target="#test_eq-pytest" style="float:right; padding-right:10px">[test]</a></h4><blockquote><p><code>test_eq</code>(<strong><code>a</code></strong>, <strong><code>b</code></strong>)</p>
</blockquote>
<div class="collapse" id="test_eq-pytest"><div class="card card-body pytest_card"><a type="button" data-toggle="collapse" data-target="#test_eq-pytest" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></a><p>No tests found for <code>test_eq</code>. To contribute a test please refer to <a href="/dev/test.html">this guide</a> and <a href="https://forums.fast.ai/t/improving-expanding-functional-tests/32929">this discussion</a>.</p></div></div><p><code>test</code> that <code>a==b</code></p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_eq</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">tensor</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]),</span><span class="n">torch</span><span class="o">.</span><span class="n">tensor</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]))</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]),</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]))</span>
<span class="n">test_eq</span><span class="p">([</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]),</span><span class="mi">3</span><span class="p">],[</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]),</span><span class="mi">3</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#exports</span>
<span class="k">def</span> <span class="nf">test_ne</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">):</span>
    <span class="s2">&quot;`test` that `a!=b`&quot;</span>
    <span class="n">test</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">nequals</span><span class="p">,</span><span class="s1">&#39;!=&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="test_ne" class="doc_header"><code>test_ne</code><a class="source_link" data-toggle="collapse" data-target="#test_ne-pytest" style="float:right; padding-right:10px">[test]</a></h4><blockquote><p><code>test_ne</code>(<strong><code>a</code></strong>, <strong><code>b</code></strong>)</p>
</blockquote>
<div class="collapse" id="test_ne-pytest"><div class="card card-body pytest_card"><a type="button" data-toggle="collapse" data-target="#test_ne-pytest" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></a><p>No tests found for <code>test_ne</code>. To contribute a test please refer to <a href="/dev/test.html">this guide</a> and <a href="https://forums.fast.ai/t/improving-expanding-functional-tests/32929">this discussion</a>.</p></div></div><p><code>test</code> that <code>a!=b</code></p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_ne</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">test_ne</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="n">test_ne</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">tensor</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]),</span><span class="n">torch</span><span class="o">.</span><span class="n">tensor</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]))</span>
<span class="n">test_ne</span><span class="p">(</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]),</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]))</span>
<span class="n">test_ne</span><span class="p">([</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]),</span><span class="mi">3</span><span class="p">],[</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">])])</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#exports</span>
<span class="k">def</span> <span class="nf">test_is</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">):</span>
    <span class="s2">&quot;`test` that `a is b`&quot;</span>
    <span class="n">test</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">operator</span><span class="o">.</span><span class="n">is_</span><span class="p">,</span> <span class="s1">&#39;is&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="test_is" class="doc_header"><code>test_is</code><a class="source_link" data-toggle="collapse" data-target="#test_is-pytest" style="float:right; padding-right:10px">[test]</a></h4><blockquote><p><code>test_is</code>(<strong><code>a</code></strong>, <strong><code>b</code></strong>)</p>
</blockquote>
<div class="collapse" id="test_is-pytest"><div class="card card-body pytest_card"><a type="button" data-toggle="collapse" data-target="#test_is-pytest" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></a><p>No tests found for <code>test_is</code>. To contribute a test please refer to <a href="/dev/test.html">this guide</a> and <a href="https://forums.fast.ai/t/improving-expanding-functional-tests/32929">this discussion</a>.</p></div></div><p><code>test</code> that <code>a is b</code></p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_fail</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">test_is</span><span class="p">([</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
<span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">test_is</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>
 

